{% extends "base.html" %}

{% block content %}
<div class="card">
  <h2>Meu Perfil Nutricional</h2>

  <form method="post" id="perfil-form">
    {% csrf_token %}

    <div class="form-group">
      <label for="{{ form.peso.id_for_label }}">Peso (kg)</label>
      {{ form.peso }}
    </div>

    <div class="form-group">
      <label for="{{ form.altura.id_for_label }}">Altura (cm)</label>
      {{ form.altura }}
    </div>

    <div class="form-group">
      <label for="{{ form.idade.id_for_label }}">Idade</label>
      {{ form.idade }}
    </div>

    <div class="form-group">
      <label for="{{ form.atividade.id_for_label }}">Nível de atividade</label>
      {{ form.atividade }}
    </div>

    <div class="form-group">
      <label for="{{ form.objetivo.id_for_label }}">Objetivo</label>
      {{ form.objetivo }}
    </div>

    <button type="submit">Salvar perfil</button>
  </form>
</div>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    const form = document.getElementById("perfil-form");
    const fields = Array.from(
      form.querySelectorAll("input, select")
    ).filter(el => el.type !== "hidden" && !el.disabled);

    fields.forEach((field, index) => {
      field.addEventListener("keydown", function (e) {
        if (e.key === "Enter") {
          e.preventDefault();

          const nextField = fields[index + 1];
          if (nextField) {
            nextField.focus();
          } else {
            form.submit(); // último campo → envia
          }
        }
      });
    });
  });
</script>
{% endblock %}
